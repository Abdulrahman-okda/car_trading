{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Link}from\"react-router-dom\";import\"./shop.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Shop=()=>{const[cars,setCars]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(\"\");useEffect(()=>{fetchCars();},[]);const fetchCars=async()=>{try{const response=await fetch(\"http://localhost:5000/api/cars\");if(response.ok){const data=await response.json();console.log(\"بيانات السيارات المسترجعة:\",data);// للتأكد من البيانات\nsetCars(data);}else{setError(\"فشل في جلب بيانات السيارات\");}}catch(err){setError(\"حدث خطأ أثناء جلب بيانات السيارات\");}finally{setLoading(false);}};if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"\\u062C\\u0627\\u0631\\u064A \\u0627\\u0644\\u062A\\u062D\\u0645\\u064A\\u0644...\"});if(error)return/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error});return/*#__PURE__*/_jsxs(\"div\",{className:\"shop-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0627\\u0644\\u0645\\u062A\\u062C\\u0631\"}),/*#__PURE__*/_jsx(\"div\",{className:\"cars-grid\",children:cars.map(car=>/*#__PURE__*/_jsx(\"div\",{className:\"car-card\",children:/*#__PURE__*/_jsxs(Link,{to:`/shop/${car.id}`,children:[car.images&&car.images.length>0?/*#__PURE__*/_jsx(\"img\",{src:car.images[0].image_url,alt:car.name,onError:e=>{console.error(\"خطأ في تحميل الصورة:\",car.images[0].image_url);e.target.src=\"https://via.placeholder.com/150\";}}):/*#__PURE__*/_jsx(\"img\",{src:\"https://via.placeholder.com/150\",alt:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0635\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"h3\",{children:car.name}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0627\\u0644\\u0633\\u0639\\u0631: \",car.price,\" \"]}),/*#__PURE__*/_jsx(\"button\",{className:\"view-btn\",children:\"\\u0639\\u0631\\u0636 \\u0627\\u0644\\u062A\\u0641\\u0627\\u0635\\u064A\\u0644\"})]})},car.id))})]});};export default Shop;","map":{"version":3,"names":["React","useState","useEffect","Link","jsx","_jsx","jsxs","_jsxs","Shop","cars","setCars","loading","setLoading","error","setError","fetchCars","response","fetch","ok","data","json","console","log","err","className","children","map","car","to","id","images","length","src","image_url","alt","name","onError","e","target","price"],"sources":["B:/برمجه/porjest/car/client/src/pages/Shop.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./shop.css\";\r\n\r\nconst Shop = () => {\r\n  const [cars, setCars] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    fetchCars();\r\n  }, []);\r\n\r\n  const fetchCars = async () => {\r\n    try {\r\n      const response = await fetch(\"http://localhost:5000/api/cars\");\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        console.log(\"بيانات السيارات المسترجعة:\", data); // للتأكد من البيانات\r\n        setCars(data);\r\n      } else {\r\n        setError(\"فشل في جلب بيانات السيارات\");\r\n      }\r\n    } catch (err) {\r\n      setError(\"حدث خطأ أثناء جلب بيانات السيارات\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (loading) return <div className=\"loading\">جاري التحميل...</div>;\r\n  if (error) return <div className=\"error\">{error}</div>;\r\n\r\n  return (\r\n    <div className=\"shop-container\">\r\n      <h1>المتجر</h1>\r\n      <div className=\"cars-grid\">\r\n        {cars.map((car) => (\r\n          <div key={car.id} className=\"car-card\">\r\n            <Link to={`/shop/${car.id}`}>\r\n              {car.images && car.images.length > 0 ? (\r\n                <img\r\n                  src={car.images[0].image_url}\r\n                  alt={car.name}\r\n                  onError={(e) => {\r\n                    console.error(\r\n                      \"خطأ في تحميل الصورة:\",\r\n                      car.images[0].image_url\r\n                    );\r\n                    e.target.src = \"https://via.placeholder.com/150\";\r\n                  }}\r\n                />\r\n              ) : (\r\n                <img src=\"https://via.placeholder.com/150\" alt=\"لا توجد صورة\" />\r\n              )}\r\n              <h3>{car.name}</h3>\r\n              <p>السعر: {car.price} </p>\r\n              <button className=\"view-btn\">عرض التفاصيل</button>\r\n            </Link>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Shop;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}