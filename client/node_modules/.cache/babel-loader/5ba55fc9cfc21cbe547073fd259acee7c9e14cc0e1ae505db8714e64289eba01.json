{"ast":null,"code":"// Api.jsx\nimport React,{useState,useEffect}from\"react\";import{Link}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Api=_ref=>{let{brand,model}=_ref;const[cars,setCars]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(\"\");useEffect(()=>{fetchCars();},[brand,model]);// يعاد الجلب عند تغيّر brand أو model\nconst fetchCars=async()=>{setLoading(true);setError(\"\");try{// بناء Query params للعلامة التجارية والموديل\nconst params=new URLSearchParams();if(brand)params.append(\"brand\",brand);if(model)params.append(\"model\",model);const url=`http://localhost:5000/api/cars${params.toString()?`?${params.toString()}`:\"\"}`;const response=await fetch(url);if(!response.ok)throw new Error();const data=await response.json();console.log(\"بيانات السيارات المسترجعة:\",data);setCars(data);}catch{setError(\"فشل في جلب بيانات السيارات\");}finally{setLoading(false);}};if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"\\u062C\\u0627\\u0631\\u064A \\u0627\\u0644\\u062A\\u062D\\u0645\\u064A\\u0644...\"});if(error)return/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error});if(cars.length===0)return/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0646\\u062A\\u0627\\u0626\\u062C\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"shop-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0627\\u0644\\u0645\\u062A\\u062C\\u0631\"}),/*#__PURE__*/_jsx(\"div\",{className:\"cars-grid\",children:cars.map(car=>/*#__PURE__*/_jsx(\"div\",{className:\"car-card\",children:/*#__PURE__*/_jsxs(Link,{to:`/shop/${car.id}`,children:[car.images&&car.images.length>0?/*#__PURE__*/_jsx(\"img\",{src:car.images[0].image_url,alt:car.name,onError:e=>{console.error(\"خطأ في تحميل الصورة:\",car.images[0].image_url);e.target.src=\"https://via.placeholder.com/150\";}}):/*#__PURE__*/_jsx(\"img\",{src:\"https://via.placeholder.com/150\",alt:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0635\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"h3\",{children:car.name}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0627\\u0644\\u0633\\u0639\\u0631: \",car.price,\" \\u062C\\u0646\\u064A\\u0647\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"view-btn\",children:\"\\u0639\\u0631\\u0636 \\u0627\\u0644\\u062A\\u0641\\u0627\\u0635\\u064A\\u0644\"})]})},car.id))})]});};export default Api;","map":{"version":3,"names":["React","useState","useEffect","Link","jsx","_jsx","jsxs","_jsxs","Api","_ref","brand","model","cars","setCars","loading","setLoading","error","setError","fetchCars","params","URLSearchParams","append","url","toString","response","fetch","ok","Error","data","json","console","log","className","children","length","map","car","to","id","images","src","image_url","alt","name","onError","e","target","price"],"sources":["B:/برمجه/porjest/car/client/src/pages/Home/Api.jsx"],"sourcesContent":["// Api.jsx\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst Api = ({ brand, model }) => {\r\n  const [cars, setCars] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    fetchCars();\r\n  }, [brand, model]); // يعاد الجلب عند تغيّر brand أو model\r\n\r\n  const fetchCars = async () => {\r\n    setLoading(true);\r\n    setError(\"\");\r\n    try {\r\n      // بناء Query params للعلامة التجارية والموديل\r\n      const params = new URLSearchParams();\r\n      if (brand) params.append(\"brand\", brand);\r\n      if (model) params.append(\"model\", model);\r\n      const url = `http://localhost:5000/api/cars${\r\n        params.toString() ? `?${params.toString()}` : \"\"\r\n      }`;\r\n\r\n      const response = await fetch(url);\r\n      if (!response.ok) throw new Error();\r\n      const data = await response.json();\r\n      console.log(\"بيانات السيارات المسترجعة:\", data);\r\n      setCars(data);\r\n    } catch {\r\n      setError(\"فشل في جلب بيانات السيارات\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (loading) return <div className=\"loading\">جاري التحميل...</div>;\r\n  if (error) return <div className=\"error\">{error}</div>;\r\n  if (cars.length === 0)\r\n    return <div className=\"text-center\">لا توجد نتائج</div>;\r\n\r\n  return (\r\n    <div className=\"shop-container\">\r\n      <h1>المتجر</h1>\r\n      <div className=\"cars-grid\">\r\n        {cars.map((car) => (\r\n          <div key={car.id} className=\"car-card\">\r\n            <Link to={`/shop/${car.id}`}>\r\n              {car.images && car.images.length > 0 ? (\r\n                <img\r\n                  src={car.images[0].image_url}\r\n                  alt={car.name}\r\n                  onError={(e) => {\r\n                    console.error(\r\n                      \"خطأ في تحميل الصورة:\",\r\n                      car.images[0].image_url\r\n                    );\r\n                    e.target.src = \"https://via.placeholder.com/150\";\r\n                  }}\r\n                />\r\n              ) : (\r\n                <img src=\"https://via.placeholder.com/150\" alt=\"لا توجد صورة\" />\r\n              )}\r\n              <h3>{car.name}</h3>\r\n              <p>السعر: {car.price} جنيه</p>\r\n              <button className=\"view-btn\">عرض التفاصيل</button>\r\n            </Link>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Api;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}